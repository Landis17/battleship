<!DOCTYPE html>
<html>
<head>
    <title>Морской бой</title>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <link rel="stylesheet" type="text/css" href="style/layout.css" />

    <script src="lib/jquery-1.10.2.min.js"></script>

    <script src="js/battleship.js"></script>
    <script src="js/battleship-game.js"></script>
    <script src="js/battleship-position.js"></script>
    <script src="js/battleship-cell.js"></script>
    <script src="js/battleship-shipsinfo.js"></script>
    <script src="js/battleship-shotstatus.js"></script>
    <script src="js/battleship-field.js"></script>
</head>

<body>
<div class="container">
    <div class="game">
        <div class="header">
            <span class="user_info">Имя игрока: </span>
        </div>
        <div class="arena_container">
            <div class="game_status"></div>
            <div class="bot">
                <p>Поле компьютера</p>
            </div>
            <div class="human">
                <p>Ваше поле</p>
            </div>
        </div>
    </div>
    <div class="greetings">
        <h1>Привет!</h1>
        <p>Это игра Морской бой. Укажите свое имя. Начинайте играть.</p>
        <form>
            <input type="text" class="username"/>
            <button type="text" class="username_btn">Начать игру</button>
        </form>
    </div>
</div>
<div class="footer">
    (с) Морской бой 
</div>

<script>
jQuery(function($) {

    init();

    var game = new BattleShip.Game( $('.human'), $('.bot'), $('.game_status'), 10, 10 );
    game.start();

    function init() {
        $('.game').hide();
        $('.username').focus();

        $('.username_btn').on('click', function(e) {
            onUserName();
            e.preventDefault();
        });

        $('.username').on('keydown', function(e) {
            if (e.keyCode == 13) {
                onUserName();
                e.preventDefault();
            }
        });

        function onUserName() {
            var userName = $('.username').val();

            if ( !$('.username').val() ) {
                alert("Введите имя!");
                return;
            }
            
            $('.user_info').append( userName );
            $('.greetings').hide(500);
            $('.game').show(500);
        }
    }
});
</script>
</body>
</html>